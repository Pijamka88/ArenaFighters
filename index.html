<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Chaos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a0520 0%, #2d0a3a 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            height: 600px;
            position: relative;
            overflow: hidden;
            border: 3px solid #daa520;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(218, 165, 32, 0.5);
            background: rgba(25, 5, 35, 0.8);
            display: flex;
            flex-direction: column;
        }
        
        /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
        #main-menu {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            padding: 20px;
            text-align: center;
            z-index: 10;
        }
        
        .title {
            font-size: 4rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            color: #ffd700;
            letter-spacing: 3px;
            text-transform: uppercase;
        }
        
        .subtitle {
            font-size: 1.5rem;
            margin-bottom: 40px;
            color: #d4af37;
            max-width: 600px;
            line-height: 1.6;
        }
        
        .btn {
            background: linear-gradient(135deg, #daa520 0%, #ffd700 100%);
            color: #1a0520;
            border: none;
            padding: 15px 40px;
            font-size: 1.4rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin: 15px 0;
            transition: all 0.3s ease;
            border: 2px solid #ffd700;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 250px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        /* –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω */
        #game-screen {
            display: none;
            flex-direction: column;
            height: 100%;
            padding: 15px;
        }
        
        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 15px;
            background: rgba(45, 10, 58, 0.7);
            border-radius: 10px;
            border: 2px solid #daa520;
        }
        
        .level-info {
            font-size: 1.3rem;
            color: #ffd700;
            font-weight: bold;
        }
        
        .xp-bar-container {
            width: 200px;
            height: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            border: 1px solid #daa520;
            overflow: hidden;
        }
        
        .xp-bar {
            height: 100%;
            background: linear-gradient(90deg, #4b0082 0%, #9400d3 100%);
            border-radius: 10px;
            width: 30%;
            transition: width 0.5s ease;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .player-level {
            font-size: 1.5rem;
            color: #ffd700;
            font-weight: bold;
        }
        
        /* –ê—Ä–µ–Ω–∞ */
        .arena {
            flex: 1;
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: relative;
            background: rgba(35, 7, 50, 0.5);
            border-radius: 15px;
            border: 2px solid #daa520;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .character {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 200px;
        }
        
        .character-image {
            width: 120px;
            height: 150px;
            background: linear-gradient(135deg, #4b0082 0%, #8a2be2 100%);
            border-radius: 10px;
            border: 3px solid #daa520;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .character-name {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffd700;
        }
        
        .health-bar-container {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid #daa520;
        }
        
        .health-bar {
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .player .health-bar {
            background: linear-gradient(90deg, #00c853 0%, #64dd17 100%);
        }
        
        .enemy .health-bar {
            background: linear-gradient(90deg, #d50000 0%, #ff1744 100%);
        }
        
        .health-text {
            font-size: 1.1rem;
            margin-top: 5px;
            font-weight: bold;
        }
        
        /* –ü–∞–Ω–µ–ª—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π */
        .abilities {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 15px;
            background: rgba(45, 10, 58, 0.7);
            border-radius: 10px;
            border: 2px solid #daa520;
        }
        
        .ability {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 3px solid #daa520;
            background: linear-gradient(135deg, #4b0082 0%, #6a0dad 100%);
            transition: all 0.3s ease;
        }
        
        .ability:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
        }
        
        .ability:active {
            transform: scale(0.95);
        }
        
        .ability-icon {
            font-size: 2rem;
            margin-bottom: 5px;
            color: #ffd700;
        }
        
        .ability-name {
            font-size: 0.9rem;
            text-align: center;
            color: #ffffff;
        }
        
        .cooldown {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
        }
        
        /* –ë–æ–µ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã */
        .attack-effect {
            position: absolute;
            font-size: 2.5rem;
            animation: floatUp 1s forwards;
            z-index: 5;
        }
        
        .player-attack {
            color: #64dd17;
            left: 55%;
            top: 40%;
        }
        
        .enemy-attack {
            color: #ff1744;
            left: 40%;
            top: 40%;
        }
        
        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-50px); }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s;
        }
        
        /* –≠–ª–µ–º–µ–Ω—Ç—ã –¥–∏–∑–∞–π–Ω–∞ */
        .decoration {
            position: absolute;
            pointer-events: none;
            z-index: 0;
        }
        
        .swirl {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(218, 165, 32, 0.1) 0%, transparent 70%);
            top: -150px;
            right: -150px;
        }
        
        .swirl-2 {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(106, 13, 173, 0.2) 0%, transparent 70%);
            bottom: -100px;
            left: -100px;
        }
        
        .pattern {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(218, 165, 32, 0.05) 0%, transparent 2%),
                radial-gradient(circle at 90% 80%, rgba(218, 165, 32, 0.05) 0%, transparent 2%);
            z-index: -1;
        }
        
        /* –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã */
        #victory-screen {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            padding: 20px;
            text-align: center;
            z-index: 20;
            background: rgba(25, 5, 35, 0.95);
        }
        
        .victory-title {
            font-size: 3rem;
            color: #ffd700;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }
        
        .reward {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #d4af37;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 600px) {
            .title {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1.2rem;
            }
            
            .character {
                width: 150px;
            }
            
            .character-image {
                width: 100px;
                height: 130px;
            }
            
            .ability {
                width: 80px;
                height: 80px;
            }
            
            .ability-icon {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="pattern"></div>
    <div class="decoration swirl"></div>
    <div class="decoration swirl-2"></div>
    
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="main-menu">
            <h1 class="title">Arena Chaos</h1>
            <p class="subtitle">–í–æ–π–¥–∏—Ç–µ –Ω–∞ –∞—Ä–µ–Ω—É –∏ —Å—Ä–∞–∂–∞–π—Ç–µ—Å—å —Å —É—Å–∏–ª–∏–≤–∞—é—â–∏–º–∏—Å—è –≤—Ä–∞–≥–∞–º–∏! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ä–µ—à–∞—é—â–∏–π –º–æ–º–µ–Ω—Ç, —á—Ç–æ–±—ã –æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–±–µ–¥—É –∏ –ø–æ–ª—É—á–∏—Ç—å –æ–ø—ã—Ç.</p>
            <button id="start-btn" class="btn">–ù–∞—á–∞—Ç—å –±–∏—Ç–≤—É</button>
            <button id="how-to-play-btn" class="btn">–ö–∞–∫ –∏–≥—Ä–∞—Ç—å</button>
        </div>
        
        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div id="game-screen">
            <div class="top-bar">
                <div class="level-info">–í—Ä–∞–≥: <span id="enemy-level">1</span></div>
                <div class="xp-bar-container">
                    <div class="xp-bar" id="xp-bar"></div>
                </div>
                <div class="player-info">
                    <span>–£—Ä–æ–≤–µ–Ω—å:</span>
                    <div class="player-level" id="player-level">1</div>
                </div>
            </div>
            
            <div class="arena" id="arena">
                <div class="character player">
                    <div class="character-name" id="player-name">–í–æ–∏–Ω</div>
                    <div class="character-image">
                        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzRmMDA4MiIvPjxwYXRoIGQ9Ik01MCAxMCBMNzAgNDAgTDUwIDYwIEwzMCA0MCBaIiBmaWxsPSIjZmZkNzAwIi8+PGNpcmNsZSBjeD0iNTAiIGN5PSIzMCIgcj0iMTAiIGZpbGw9IiNmZmZmZmYiLz48Y2lyY2xlIGN4PSI0MCIgY3k9IjQwIiByPSI1IiBmaWxsPSIjZmZmZmZmIi8+PGNpcmNsZSBjeD0iNjAiIGN5PSI0MCIgcj0iNSIgZmlsbD0iI2ZmZmZmZiIvPjxwYXRoIGQ9Ik00NSA1NSBMNTUgNTUgTDUwIDcwIFoiIGZpbGw9IiNmZmQ3MDAiLz48L3N2Zz4=" alt="Player">
                    </div>
                    <div class="health-bar-container">
                        <div class="health-bar" id="player-health-bar" style="width: 100%;"></div>
                    </div>
                    <div class="health-text"><span id="player-health">100</span>/<span id="player-max-health">100</span></div>
                </div>
                
                <div class="character enemy">
                    <div class="character-name" id="enemy-name">–ì–æ–±–ª–∏–Ω</div>
                    <div class="character-image">
                        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2Q1MDAwMCIvPjxjaXJjbGUgY3g9IjUwIiBjeT0iNDAiIHI9IjIwIiBmaWxsPSIjMDA4MDQwIi8+PGNpcmNsZSBjeD0iNDAiIGN5PSIzNSIgcj0iNSIgZmlsbD0iI2ZmZmZmZiIvPjxjaXJjbGUgY3g9IjYwIiBjeT0iMzUiIHI9IjUiIGZpbGw9IiNmZmZmZmYiLz48Y2lyY2xlIGN4PSI1MCIgY3k9IjQ1IiByPSI1IiBmaWxsPSIjZmYxNzQ0Ii8+PHBhdGggZD0iTTMwIDcwIEw3MCA3MCBMNjAgODUgTDQwIDg1IFoiIGZpbGw9IiMwMDgwNDAiLz48L3N2Zz4=" alt="Enemy">
                    </div>
                    <div class="health-bar-container">
                        <div class="health-bar" id="enemy-health-bar" style="width: 100%;"></div>
                    </div>
                    <div class="health-text"><span id="enemy-health">50</span>/<span id="enemy-max-health">50</span></div>
                </div>
            </div>
            
            <div class="abilities">
                <div class="ability" id="ability1">
                    <div class="ability-icon">‚ö°</div>
                    <div class="ability-name">–£–¥–∞—Ä –º–æ–ª–Ω–∏–∏</div>
                    <div class="cooldown" id="cooldown1" style="display: none;">3</div>
                </div>
                
                <div class="ability" id="ability2">
                    <div class="ability-icon">‚ù§Ô∏è</div>
                    <div class="ability-name">–ò—Å—Ü–µ–ª–µ–Ω–∏–µ</div>
                    <div class="cooldown" id="cooldown2" style="display: none;">5</div>
                </div>
                
                <div class="ability" id="ability3">
                    <div class="ability-icon">üõ°Ô∏è</div>
                    <div class="ability-name">–©–∏—Ç</div>
                    <div class="cooldown" id="cooldown3" style="display: none;">7</div>
                </div>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã -->
        <div id="victory-screen">
            <h2 class="victory-title">–ü–æ–±–µ–¥–∞!</h2>
            <p class="reward">–í—ã –ø–æ–ª—É—á–∏–ª–∏ <span id="xp-earned">50</span> –æ–ø—ã—Ç–∞</p>
            <p class="subtitle">–°–ª–µ–¥—É—é—â–∏–π –≤—Ä–∞–≥ –±—É–¥–µ—Ç —Å–∏–ª—å–Ω–µ–µ!</p>
            <button id="next-enemy-btn" class="btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <script>
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        const gameState = {
            player: {
                level: 1,
                xp: 0,
                maxXp: 100,
                health: 100,
                maxHealth: 100,
                damage: 10,
                isShielded: false
            },
            enemy: {
                level: 1,
                health: 50,
                maxHealth: 50,
                damage: 8
            },
            abilities: {
                lightning: { cooldown: 0, maxCooldown: 3 },
                heal: { cooldown: 0, maxCooldown: 5 },
                shield: { cooldown: 0, maxCooldown: 7 }
            },
            gameActive: false
        };
        
        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const mainMenu = document.getElementById('main-menu');
        const gameScreen = document.getElementById('game-screen');
        const victoryScreen = document.getElementById('victory-screen');
        const startBtn = document.getElementById('start-btn');
        const nextEnemyBtn = document.getElementById('next-enemy-btn');
        
        // –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
        startBtn.addEventListener('click', () => {
            mainMenu.style.display = 'none';
            gameScreen.style.display = 'flex';
            gameState.gameActive = true;
            startCombat();
        });
        
        // –°–ª–µ–¥—É—é—â–∏–π –≤—Ä–∞–≥
        nextEnemyBtn.addEventListener('click', () => {
            victoryScreen.style.display = 'none';
            gameScreen.style.display = 'flex';
            spawnNewEnemy();
            startCombat();
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
        document.getElementById('ability1').addEventListener('click', () => useAbility('lightning'));
        document.getElementById('ability2').addEventListener('click', () => useAbility('heal'));
        document.getElementById('ability3').addEventListener('click', () => useAbility('shield'));
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        function updateUI() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è –∏–≥—Ä–æ–∫–∞
            document.getElementById('player-health').textContent = gameState.player.health;
            document.getElementById('player-max-health').textContent = gameState.player.maxHealth;
            document.getElementById('player-health-bar').style.width = 
                (gameState.player.health / gameState.player.maxHealth * 100) + '%';
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è –≤—Ä–∞–≥–∞
            document.getElementById('enemy-health').textContent = gameState.enemy.health;
            document.getElementById('enemy-max-health').textContent = gameState.enemy.maxHealth;
            document.getElementById('enemy-health-bar').style.width = 
                (gameState.enemy.health / gameState.enemy.maxHealth * 100) + '%';
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –≤—Ä–∞–≥–∞
            document.getElementById('enemy-level').textContent = gameState.enemy.level;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∏–≥—Ä–æ–∫–∞ –∏ XP
            document.getElementById('player-level').textContent = gameState.player.level;
            document.getElementById('xp-bar').style.width = 
                (gameState.player.xp / gameState.player.maxXp * 100) + '%';
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
            updateAbilityCooldowns();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
        function updateAbilityCooldowns() {
            for (const ability in gameState.abilities) {
                const cooldownElement = document.getElementById(`cooldown${ability === 'lightning' ? 1 : ability === 'heal' ? 2 : 3}`);
                
                if (gameState.abilities[ability].cooldown > 0) {
                    cooldownElement.style.display = 'flex';
                    cooldownElement.textContent = gameState.abilities[ability].cooldown;
                } else {
                    cooldownElement.style.display = 'none';
                }
            }
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤—Ä–∞–≥–∞
        function spawnNewEnemy() {
            gameState.enemy.level++;
            
            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –≤—Ä–∞–≥–∞ —Å —É—Ä–æ–≤–Ω–µ–º
            const healthMultiplier = 1 + (gameState.enemy.level - 1) * 0.3;
            const damageMultiplier = 1 + (gameState.enemy.level - 1) * 0.2;
            
            gameState.enemy.maxHealth = Math.floor(50 * healthMultiplier);
            gameState.enemy.health = gameState.enemy.maxHealth;
            gameState.enemy.damage = Math.floor(8 * damageMultiplier);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –≤—Ä–∞–≥–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
            const enemyNames = ['–ì–æ–±–ª–∏–Ω', '–û—Ä–∫', '–¢—Ä–æ–ª–ª—å', '–î–µ–º–æ–Ω', '–î—Ä–∞–∫–æ–Ω–æ—Ä–æ–∂–¥–µ–Ω–Ω—ã–π', '–ü–æ–≤–µ–ª–∏—Ç–µ–ª—å –¢—å–º—ã'];
            const nameIndex = Math.min(Math.floor(gameState.enemy.level / 3), enemyNames.length - 1);
            document.getElementById('enemy-name').textContent = enemyNames[nameIndex];
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–∞–≥–∞
            const enemyImage = document.querySelector('.enemy .character-image img');
            const enemyColors = ['#d50000', '#008040', '#4b0082', '#800080', '#ff8c00', '#000000'];
            enemyImage.parentElement.style.background = `linear-gradient(135deg, ${enemyColors[nameIndex]} 0%, ${adjustColor(enemyColors[nameIndex], -30)} 100%)`;
        }
        
        // –ù–∞—á–∞—Ç—å –±–æ–π
        function startCombat() {
            updateUI();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞ –∏–≥—Ä–æ–∫–∞
            const playerAttackInterval = setInterval(() => {
                if (!gameState.gameActive) {
                    clearInterval(playerAttackInterval);
                    return;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞, –∂–∏–≤ –ª–∏ –≤—Ä–∞–≥
                if (gameState.enemy.health <= 0) {
                    clearInterval(playerAttackInterval);
                    playerVictory();
                    return;
                }
                
                // –ò–≥—Ä–æ–∫ –∞—Ç–∞–∫—É–µ—Ç
                const damage = gameState.player.damage;
                gameState.enemy.health = Math.max(0, gameState.enemy.health - damage);
                showDamageEffect(damage, 'player-attack');
                updateUI();
            }, 1500);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞ –≤—Ä–∞–≥–∞
            const enemyAttackInterval = setInterval(() => {
                if (!gameState.gameActive) {
                    clearInterval(enemyAttackInterval);
                    return;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞, –∂–∏–≤ –ª–∏ –∏–≥—Ä–æ–∫
                if (gameState.player.health <= 0) {
                    clearInterval(enemyAttackInterval);
                    gameOver();
                    return;
                }
                
                // –í—Ä–∞–≥ –∞—Ç–∞–∫—É–µ—Ç
                let damage = gameState.enemy.damage;
                
                // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω —â–∏—Ç, —É–º–µ–Ω—å—à–∞–µ–º —É—Ä–æ–Ω
                if (gameState.player.isShielded) {
                    damage = Math.max(1, Math.floor(damage * 0.3));
                    gameState.player.isShielded = false;
                }
                
                gameState.player.health = Math.max(0, gameState.player.health - damage);
                showDamageEffect(damage, 'enemy-attack');
                updateUI();
            }, 2000);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
            const cooldownInterval = setInterval(() => {
                if (!gameState.gameActive) {
                    clearInterval(cooldownInterval);
                    return;
                }
                
                for (const ability in gameState.abilities) {
                    if (gameState.abilities[ability].cooldown > 0) {
                        gameState.abilities[ability].cooldown--;
                    }
                }
                
                updateAbilityCooldowns();
            }, 1000);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç —É—Ä–æ–Ω–∞
        function showDamageEffect(damage, className) {
            const effect = document.createElement('div');
            effect.className = `attack-effect ${className}`;
            effect.textContent = `-${damage}`;
            
            document.getElementById('arena').appendChild(effect);
            
            // –£–¥–∞–ª–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                effect.remove();
            }, 1000);
        }
        
        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
        function useAbility(ability) {
            if (gameState.abilities[ability].cooldown > 0 || !gameState.gameActive) return;
            
            switch (ability) {
                case 'lightning':
                    // –£–¥–∞—Ä –º–æ–ª–Ω–∏–∏ - –Ω–∞–Ω–æ—Å–∏—Ç –±–æ–ª—å—à–æ–π —É—Ä–æ–Ω –≤—Ä–∞–≥—É
                    const lightningDamage = Math.floor(gameState.player.damage * 2.5);
                    gameState.enemy.health = Math.max(0, gameState.enemy.health - lightningDamage);
                    showDamageEffect(lightningDamage, 'player-attack');
                    gameState.abilities.lightning.cooldown = gameState.abilities.lightning.maxCooldown;
                    break;
                    
                case 'heal':
                    // –ò—Å—Ü–µ–ª–µ–Ω–∏–µ - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ –∏–≥—Ä–æ–∫–∞
                    const healAmount = Math.floor(gameState.player.maxHealth * 0.4);
                    gameState.player.health = Math.min(gameState.player.maxHealth, gameState.player.health + healAmount);
                    showDamageEffect(`+${healAmount}`, 'player-attack');
                    gameState.abilities.heal.cooldown = gameState.abilities.heal.maxCooldown;
                    break;
                    
                case 'shield':
                    // –©–∏—Ç - —É–º–µ–Ω—å—à–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —É—Ä–æ–Ω
                    gameState.player.isShielded = true;
                    document.querySelector('.player .character-image').classList.add('pulse');
                    setTimeout(() => {
                        document.querySelector('.player .character-image').classList.remove('pulse');
                    }, 500);
                    gameState.abilities.shield.cooldown = gameState.abilities.shield.maxCooldown;
                    break;
            }
            
            updateUI();
        }
        
        // –ü–æ–±–µ–¥–∞ –∏–≥—Ä–æ–∫–∞
        function playerVictory() {
            gameState.gameActive = false;
            
            // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞
            const xpEarned = gameState.enemy.level * 20;
            gameState.player.xp += xpEarned;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
            if (gameState.player.xp >= gameState.player.maxXp) {
                gameState.player.level++;
                gameState.player.xp = gameState.player.xp - gameState.player.maxXp;
                gameState.player.maxXp = Math.floor(gameState.player.maxXp * 1.5);
                
                // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∏–≥—Ä–æ–∫–∞
                gameState.player.maxHealth = Math.floor(gameState.player.maxHealth * 1.2);
                gameState.player.health = gameState.player.maxHealth;
                gameState.player.damage = Math.floor(gameState.player.damage * 1.15);
            }
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã
            document.getElementById('xp-earned').textContent = xpEarned;
            setTimeout(() => {
                gameScreen.style.display = 'none';
                victoryScreen.style.display = 'flex';
            }, 1500);
        }
        
        // –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞ (–ø—Ä–æ–∏–≥—Ä—ã—à)
        function gameOver() {
            gameState.gameActive = false;
            alert('–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! –ò–≥—Ä–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞.');
            resetGame();
        }
        
        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            gameState.player.level = 1;
            gameState.player.xp = 0;
            gameState.player.maxXp = 100;
            gameState.player.health = 100;
            gameState.player.maxHealth = 100;
            gameState.player.damage = 10;
            
            gameState.enemy.level = 1;
            gameState.enemy.health = 50;
            gameState.enemy.maxHealth = 50;
            gameState.enemy.damage = 8;
            
            for (const ability in gameState.abilities) {
                gameState.abilities[ability].cooldown = 0;
            }
            
            victoryScreen.style.display = 'none';
            gameScreen.style.display = 'none';
            mainMenu.style.display = 'flex';
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–≤–µ—Ç–∞
        function adjustColor(color, amount) {
            let usePound = false;
            
            if (color[0] === "#") {
                color = color.slice(1);
                usePound = true;
            }
            
            const num = parseInt(color, 16);
            let r = (num >> 16) + amount;
            
            if (r > 255) r = 255;
            else if (r < 0) r = 0;
            
            let b = ((num >> 8) & 0x00FF) + amount;
            
            if (b > 255) b = 255;
            else if (b < 0) b = 0;
            
            let g = (num & 0x0000FF) + amount;
            
            if (g > 255) g = 255;
            else if (g < 0) g = 0;
            
            return (usePound ? "#" : "") + (g | (b << 8) | (r << 16)).toString(16);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        updateUI();
    </script>
</body>
</html>