<!DOCTYPE html>
<html>
<head>
    <title>Chocolate Chaos</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            background: #4A2B0F;
            color: #D4A574;
            font-family: 'Arial', sans-serif;
            text-align: center;
        }

        #mainMenu, #arena {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .button {
            background: #6B4423;
            border: 2px solid #8B5E3C;
            color: #FFE4C4;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            border-radius: 5px;
        }

        .character {
            font-size: 64px;
            margin: 20px;
            animation: pulse 1.5s infinite;
        }

        .health-bar {
            width: 200px;
            height: 20px;
            background: #3D2010;
            margin: 10px auto;
            border-radius: 5px;
            overflow: hidden;
        }

        .health-fill {
            height: 100%;
            background: #50C878;
            transition: width 0.3s;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .stats {
            background: #5A3415;
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div id="mainMenu">
        <h1>üç´ Chocolate Chaos ‚öîÔ∏è</h1>
        <div class="stats">
            <p>–£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></p>
            <p>–û–ø—ã—Ç: <span id="xp">0</span>/100</p>
            <p>–ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span></p>
            <p>‚öîÔ∏è –ê—Ç–∞–∫–∞: <span id="attack">10</span></p>
            <p>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: <span id="maxHealth">100</span></p>
        </div>
        <button class="button" onclick="startGame()">–ù–∞—á–∞—Ç—å –±–æ–π</button>
        <button class="button" onclick="upgradeStat('attack')">–£–ª—É—á—à–∏—Ç—å –∞—Ç–∞–∫—É (50üí∞)</button>
        <button class="button" onclick="upgradeStat('health')">–£–ª—É—á—à–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ (50üí∞)</button>
    </div>

    <div id="arena" class="hidden">
        <div id="playerArea">
            <div class="health-bar"><div id="playerHealth" class="health-fill" style="width: 100%"></div></div>
            <div class="character">üó°Ô∏è</div>
        </div>
        <div id="enemyArea">
            <div class="health-bar"><div id="enemyHealth" class="health-fill" style="width: 100%"></div></div>
            <div class="character" id="enemyIcon">üõ°Ô∏è</div>
        </div>
        <div id="battleLog"></div>
        <button class="button" onclick="returnToMenu()">–í –º–µ–Ω—é</button>
    </div>

    <script>
        let player = {
            level: 1,
            xp: 0,
            coins: 0,
            attack: 10,
            health: 100,
            maxHealth: 100,
            wins: 0
        };

        let currentEnemy = null;
        let battleInterval = null;

        function createEnemy(isBoss = false) {
            return {
                health: isBoss ? 300 : 50 + player.wins * 20,
                maxHealth: isBoss ? 300 : 50 + player.wins * 20,
                attack: isBoss ? 30 : 10 + player.wins * 3,
                icon: isBoss ? 'üêâ' : 'üõ°Ô∏è'
            };
        }

        function startGame() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('arena').classList.remove('hidden');
            player.health = player.maxHealth;
            currentEnemy = createEnemy(player.wins >= 5);
            if(player.wins >= 5) player.wins = 0;
            
            updateHealthBars();
            document.getElementById('enemyIcon').textContent = currentEnemy.icon;
            
            battleInterval = setInterval(fightRound, 1500);
        }

        function fightRound() {
            // Player attack
            currentEnemy.health -= player.attack;
            logBattle(`–í—ã –Ω–∞–Ω–µ—Å–ª–∏ ${player.attack} —É—Ä–æ–Ω–∞!`);
            
            // Enemy attack
            player.health -= currentEnemy.attack;
            logBattle(`–í—Ä–∞–≥ –Ω–∞–Ω–µ—Å ${currentEnemy.attack} —É—Ä–æ–Ω–∞!`);
            
            updateHealthBars();

            if(currentEnemy.health <= 0) {
                endBattle(true);
            } else if(player.health <= 0) {
                endBattle(false);
            }
        }

        function endBattle(victory) {
            clearInterval(battleInterval);
            if(victory) {
                player.wins++;
                player.xp += 25;
                player.coins += 10;
                logBattle("–ü–æ–±–µ–¥–∞! +25 –æ–ø—ã—Ç–∞ +10 –º–æ–Ω–µ—Ç");
                
                if(player.xp >= 100) {
                    player.level++;
                    player.attack += 5;
                    player.maxHealth += 20;
                    player.xp = 0;
                    logBattle("–£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω! +5 –∞—Ç–∞–∫–∏ +20 –∑–¥–æ—Ä–æ–≤—å—è");
                }
                
                if(player.wins % 5 === 0) {
                    logBattle("–ü—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –±–æ—Å—Å!");
                }
            } else {
                logBattle("–ü–æ—Ä–∞–∂–µ–Ω–∏–µ...");
                player.wins = 0;
            }
            
            updateStatsDisplay();
        }

        function upgradeStat(stat) {
            if(player.coins >= 50) {
                player.coins -= 50;
                if(stat === 'attack') player.attack += 5;
                if(stat === 'health') player.maxHealth += 20;
                updateStatsDisplay();
            }
        }

        function updateHealthBars() {
            document.getElementById('playerHealth').style.width = 
                `${Math.max(0, (player.health / player.maxHealth) * 100)}%`;
            document.getElementById('enemyHealth').style.width = 
                `${Math.max(0, (currentEnemy.health / currentEnemy.maxHealth) * 100)}%`;
        }

        function updateStatsDisplay() {
            document.getElementById('level').textContent = player.level;
            document.getElementById('xp').textContent = player.xp;
            document.getElementById('coins').textContent = player.coins;
            document.getElementById('attack').textContent = player.attack;
            document.getElementById('maxHealth').textContent = player.maxHealth;
        }

        function logBattle(text) {
            const log = document.getElementById('battleLog');
            log.innerHTML = text + '<br>' + log.innerHTML;
        }

        function returnToMenu() {
            document.getElementById('mainMenu').classList.remove('hidden');
            document.getElementById('arena').classList.add('hidden');
            clearInterval(battleInterval);
        }
    </script>
</body>
</html>