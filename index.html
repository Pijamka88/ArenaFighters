<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Fighters</title>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #3a281d;
            color: #f5e4b4;
            font-family: 'MedievalSharp', cursive;
            text-align: center;
            min-height: 100vh;
        }

        .container {
            padding: 20px;
        }

        .menu-button {
            background-color: #5e4833;
            border: 2px solid #7a644f;
            border-radius: 10px;
            color: #f5e4b4;
            font-size: 1.5em;
            padding: 15px 30px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
        }

        .menu-button:hover {
            background-color: #7a644f;
            transform: scale(1.05);
        }

        .stats {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            display: flex;
            justify-content: space-between;
        }

        .health-bar {
            width: 200px;
            height: 20px;
            background-color: #444;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px auto;
        }

        .health-fill {
            height: 100%;
            background-color: #4caf50;
            transition: width 0.5s;
        }

        .battle-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 60vh;
        }

        .character {
            font-size: 3em;
            animation: float 2s ease-in-out infinite;
        }

        .damage-text {
            position: absolute;
            color: red;
            font-size: 2em;
            animation: damage 1s forwards;
        }

        .upgrade-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes damage {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-50px); }
        }

        @media (max-width: 600px) {
            .stats { flex-direction: column; align-items: center; }
            .battle-container { flex-direction: column; }
            .menu-button { font-size: 1.2em; padding: 10px 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="mainMenu" class="menu">
            <div class="stats" id="playerStats">
                <div> —É—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></div>
                <div> Í≤ΩÌóòÏπò: <span id="xp">0</span>/100</div>
                <div> ‚ù§Ô∏è <span id="health">10</span></div>
                <div> ‚öîÔ∏è <span id="attack">1</span></div>
                <div> üõ°Ô∏è <span id="armor">0</span></div>
            </div>
            <button class="menu-button" onclick="startBattle()">–ù–∞—á–∞—Ç—å –±–æ–π</button>
            <button class="menu-button" onclick="showUpgrades()">–ü—Ä–æ–∫–∞—á–∫–∞</button>
        </div>

        <div id="battleScreen" class="hidden">
            <div class="battle-container">
                <div id="player" class="character"><Player></div>
                <div id="enemy" class="character">Enemy</div>
            </div>
            <div class="health-bars">
                <div class="health-bar" id="playerHealthBar"><div class="health-fill"></div></div>
                <div class="health-bar" id="enemyHealthBar"><div class="health-fill"></div></div>
            </div>
        </div>

        <div id="upgradeScreen" class="hidden">
            <div class="upgrade-container">
                <button class="menu-button" onclick="upgrade('attack')">‚öîÔ∏è –ê—Ç–∞–∫–∞</button>
                <button class="menu-button" onclick="upgrade('health')">‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</button>
                <button class="menu-button" onclick="upgrade('armor')">üõ°Ô∏è –ë—Ä–æ–Ω—è</button>
            </div>
        </div>
    </div>

    <script>
        let player = {
            level: 1,
            xp: 0,
            health: 10,
            maxHealth: 10,
            attack: 1,
            armor: 0,
            upgradePoints: 0
        };

        let enemy = {
            health: 10,
            maxHealth: 10,
            attack: 1
        };

        let battleInterval;
        let damageQueue = [];

        function updateStats() {
            document.getElementById('level').textContent = player.level;
            document.getElementById('xp').textContent = player.xp;
            document.getElementById('health').textContent = player.health;
            document.getElementById('attack').textContent = player.attack;
            document.getElementById('armor').textContent = player.armor;
        }

        function startBattle() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('battleScreen').classList.remove('hidden');
            resetHealthBars();
            
            enemy = {
                health: 10 + (player.level * 2),
                maxHealth: 10 + (player.level * 2),
                attack: 1 + Math.floor(player.level * 0.5)
            };

            battleInterval = setInterval(attackCycle, 2000);
            setTimeout(endBattle, 10000);
        }

        function attackCycle() {
            if (player.health <= 0 || enemy.health <= 0) return;

            // Player attack
            let damage = Math.max(1, player.attack - enemy.armor);
            enemy.health = Math.max(0, enemy.health - damage);
            showDamage(enemy.healthBar, damage);
            updateHealthBar('enemy', enemy.health / enemy.maxHealth);

            // Enemy attack
            setTimeout(() => {
                if (enemy.health > 0) {
                    let enemyDamage = Math.max(1, enemy.attack - player.armor);
                    player.health = Math.max(0, player.health - enemyDamage);
                    showDamage(player.healthBar, enemyDamage);
                    updateHealthBar('player', player.health / player.maxHealth);
                }
            }, 1000);
        }

        function endBattle() {
            clearInterval(battleInterval);
            document.getElementById('battleScreen').classList.add('hidden');
            
            if (player.health > 0) {
                player.xp += 20 + (enemy.level || 1)*5;
                if (player.xp >= 100) {
                    player.level++;
                    player.upgradePoints++;
                    player.xp = 0;
                }
                updateStats();
            }

            if (player.health <= 0) {
                alert('–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏!');
                resetGame();
            }

            if (player.upgradePoints > 0) {
                showUpgrades();
            } else {
                document.getElementById('mainMenu').classList.remove('hidden');
            }
        }

        function showDamage(target, damage) {
            const damageElement = document.createElement('div');
            damageElement.className = 'damage-text';
            damageElement.textContent = `-${damage}`;
            target.appendChild(damageElement);
            setTimeout(() => damageElement.remove(), 1000);
        }

        function updateHealthBar(target, percent) {
            const bar = document.getElementById(`${target}HealthBar`).querySelector('.health-fill');
            bar.style.width = `${percent * 100}%`;
        }

        function resetHealthBars() {
            updateHealthBar('player', 1);
            updateHealthBar('enemy', 1);
        }

        function showUpgrades() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('upgradeScreen').classList.remove('hidden');
        }

        function upgrade(stat) {
            if (player.upgradePoints <= 0) return;
            
            switch(stat) {
                case 'attack':
                    player.attack += 1;
                    break;
                case 'health':
                    player.maxHealth += 5;
                    player.health = player.maxHealth;
                    break;
                case 'armor':
                    player.armor += 1;
                    break;
            }
            
            player.upgradePoints--;
            updateStats();
            document.getElementById('upgradeScreen').classList.add('hidden');
            document.getElementById('mainMenu').classList.remove('hidden');
        }

        function resetGame() {
            player = {
                level: 1,
                xp: 0,
                health: 10,
                maxHealth: 10,
                attack: 1,
                armor: 0,
                upgradePoints: 0
            };
            updateStats();
            document.getElementById('mainMenu').classList.remove('hidden');
        }

        document.querySelectorAll('.health-bar').forEach(bar => {
            const fill = document.createElement('div');
            fill.className = 'health-fill';
            bar.appendChild(fill);
        });

        updateStats();
    </script>
</body>
</html>
