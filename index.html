<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Fighters</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Satyr+SP&display=swap');
        body {
            font-family: 'Satyr SP', serif;
            background: #282828;
            color: #e5e5e5;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .menu-container {
            text-align: center;
            padding: 20px;
            background: #3a3a3a;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }
        .menu-btn {
            padding: 15px 30px;
            margin: 10px;
            background: #5a5a5a;
            color: white;
            border: 2px solid #a0a0a0;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px #000;
        }
        .menu-btn:hover {
            background: #7a7a7a;
        }
        .player-stats {
            margin: 20px;
            font-size: 1.2em;
        }
        .stat {
            margin: 5px;
            display: inline-block;
        }
        .stat-icon {
            font-size: 1.5em;
        }
        .battle-container {
            position: relative;
            width: 90%;
            max-width: 1200px;
            height: 600px;
            margin: 20px auto;
            background: #3a3a3a;
            border-radius: 10px;
            overflow: hidden;
            display: none;
        }
        .fighter {
            width: 45%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .player-fighter {
            background: #4a4a4a;
            border-right: 2px solid #a0a0a0;
        }
        .enemy-fighter {
            background: #4a4a4a;
            border-left: 2px solid #a0a0a0;
        }
        .health-bar {
            position: absolute;
            top: 10px;
            width: 80%;
            height: 20px;
            background: #5a5a5a;
            border-radius: 10px;
        }
        .health-fill {
            height: 100%;
            background: #55ff55;
            transition: width 0.3s ease;
        }
        .damage-number {
            position: absolute;
            font-size: 2em;
            color: #ff4444;
            animation: damage-fade 1s ease-out;
        }
        .upgrade-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            display: none;
        }
        .upgrade-options {
            background: #3a3a3a;
            padding: 20px;
            border-radius: 10px;
        }
        .upgrade-btn {
            padding: 10px 20px;
            margin: 5px;
            background: #5a5a5a;
            color: white;
            border: 2px solid #a0a0a0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .upgrade-btn:hover {
            background: #7a7a7a;
        }
        @keyframes damage-fade {
            0% { opacity: 1; transform: translateY(-20px); }
            100% { opacity: 0; transform: translateY(20px); }
        }
    </style>
</head>
<body>
    <div class="menu-container">
        <button class="menu-btn" onclick="startBattle()">–ù–∞—á–∞—Ç—å –±–æ–π</button>
        <button class="menu-btn" onclick="openUpgradeMenu()">–ü—Ä–æ–∫–∞—á–∫–∞</button>
        <div class="player-stats">
            <div class="stat"><span class="stat-icon">‚ö°</span> –£—Ä–æ–≤–µ–Ω—å: <span id="playerLevel">1</span></div>
            <div class="stat"><span class="stat-icon">üåü</span> –û–ø—ã—Ç: <span id="playerExp">0/10</span></div>
            <div class="stat"><span class="stat-icon">‚ù§</span> –ñ–∏–∑–Ω–∏: <span id="playerHealth">10</span></div>
            <div class="stat"><span class="stat-icon">‚öî</span> –ê—Ç–∞–∫–∞: <span id="playerAttack">2</span></div>
            <div class="stat"><span class="stat-icon">üõ°</span> –ë—Ä–æ–Ω—è: <span id="playerDefense">1</span></div>
        </div>
    </div>

    <div class="battle-container">
        <div class="fighter player-fighter">
            <div class="health-bar">
                <div class="health-fill" id="playerHealthBar"></div>
            </div>
            <div class="fighter-icon">üó°</div>
        </div>
        <div class="fighter enemy-fighter">
            <div class="health-bar">
                <div class="health-fill" id="enemyHealthBar"></div>
            </div>
            <div class="fighter-icon">üõ°</div>
        </div>
    </div>

    <div class="upgrade-menu">
        <div class="upgrade-options">
            <h2>–ü—Ä–æ–∫–∞—á–∫–∞</h2>
            <p>–û—Å—Ç–∞–ª–æ—Å—å –æ—á–∫–æ–≤: <span id="upgradePoints">0</span></p>
            <button class="upgrade-btn" onclick="upgrade('attack')">–ê—Ç–∞–∫–∞</button>
            <button class="upgrade-btn" onclick="upgrade('health')">–ñ–∏–∑–Ω–∏</button>
            <button class="upgrade-btn" onclick="upgrade('defense')">–ë—Ä–æ–Ω—è</button>
        </div>
    </div>

    <script>
        const player = {
            level: 1,
            exp: 0,
            maxExp: 10,
            health: 10,
            attack: 2,
            defense: 1,
            baseHealth: 10,
            upgradePoints: 0
        };

        const enemy = {
            health: 10,
            attack: 2,
            defense: 1
        };

        let battleInterval;
        let playerHealthBar = document.getElementById('playerHealthBar');
        let enemyHealthBar = document.getElementById('enemyHealthBar');

        function updateStats() {
            document.getElementById('playerLevel').textContent = player.level;
            document.getElementById('playerExp').textContent = `${player.exp}/${player.maxExp}`;
            document.getElementById('playerHealth').textContent = player.health;
            document.getElementById('playerAttack').textContent = player.attack;
            document.getElementById('playerDefense').textContent = player.defense;
            document.getElementById('upgradePoints').textContent = player.upgradePoints;
        }

        function startBattle() {
            resetBattle();
            document.querySelector('.menu-container').style.display = 'none';
            document.querySelector('.battle-container').style.display = 'flex';

            enemy.health = 10;
            enemy.attack = Math.floor(player.level * 1.5);
            enemy.defense = player.level;

            battleInterval = setInterval(() => {
                playerAttack();
                if (enemy.health <= 0) return;
                enemyAttack();
            }, 1000);

            setTimeout(() => {
                clearInterval(battleInterval);
                processWin(false);
            }, 10000);
        }

        function playerAttack() {
            let damage = Math.max(0, player.attack - enemy.defense);
            enemy.health = Math.max(0, enemy.health - damage);
            updateHealthBars();
            showDamage(damage, 'enemy');
            checkWin();
        }

        function enemyAttack() {
            let damage = Math.max(0, enemy.attack - player.defense);
            player.health = Math.max(0, player.health - damage);
            updateHealthBars();
            showDamage(damage, 'player');
            checkWin();
        }

        function updateHealthBars() {
            playerHealthBar.style.width = `${(player.health / player.baseHealth) * 100}%`;
            enemyHealthBar.style.width = `${(enemy.health / 10) * 100}%`;
        }

        function showDamage(damage, side) {
            const damageDiv = document.createElement('div');
            damageDiv.className = 'damage-number';
            damageDiv.textContent = damage;
            const fighter = document.querySelector(`.${side}-fighter`);
            fighter.appendChild(damageDiv);
            setTimeout(() => damageDiv.remove(), 1000);
        }

        function checkWin() {
            if (enemy.health <= 0) {
                clearInterval(battleInterval);
                processWin(true);
            } else if (player.health <= 0) {
                clearInterval(battleInterval);
                processWin(false);
            }
        }

        function processWin(isPlayerWin) {
            document.querySelector('.battle-container').style.display = 'none';
            document.querySelector('.menu-container').style.display = 'block';

            if (isPlayerWin) {
                player.exp += 5;
                if (player.exp >= player.maxExp) {
                    levelUp();
                }
            } else {
                player.health = player.baseHealth;
                player.exp += 2;
            }

            updateStats();
            updateHealthBars();
        }

        function levelUp() {
            const expDelta = player.exp - player.maxExp;
            player.level++;
            player.maxExp = Math.floor(player.maxExp * 1.5);
            player.health = player.baseHealth;
            player.upgradePoints++;
            player.exp = expDelta;

            openUpgradeMenu();
        }

        function openUpgradeMenu() {
            if (player.upgradePoints > 0) {
                document.querySelector('.upgrade-menu').style.display = 'flex';
            }
        }

        function closeUpgradeMenu() {
            document.querySelector('.upgrade-menu').style.display = 'none';
        }

        function upgrade(stat) {
            if (player.upgradePoints <= 0) return;
            switch(stat) {
                case 'attack':
                    player.attack++;
                    break;
                case 'health':
                    player.health += 2;
                    player.baseHealth += 2;
                    break;
                case 'defense':
                    player.defense++;
                    break;
            }
            player.upgradePoints--;
            updateStats();
            closeUpgradeMenu();
        }

        function resetBattle() {
            player.health = player.baseHealth;
            updateHealthBars();
        }
    </script>
</body>
</html>
