<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Fighters</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #4a2d0f;
            color: #f5e5d0;
            font-family: 'MedievalSharp', cursive;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 90%;
            max-width: 600px;
            margin: 0 auto;
        }

        .menu {
            margin-top: 20px;
        }

        .menu button {
            background-color: #8b4513;
            border: 2px solid #a0522d;
            color: white;
            padding: 15px 30px;
            margin: 10px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
        }

        .menu button:hover {
            background-color: #a0522d;
        }

        .stats {
            margin: 20px 0;
            display: flex;
            justify-content: space-around;
        }

        .stat {
            text-align: center;
        }

        .battle-screen {
            display: none;
            flex-direction: column;
            align-items: center;
        }

        .characters {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin: 20px 0;
        }

        .character {
            width: 45%;
            position: relative;
        }

        .health-bar {
            width: 100%;
            height: 20px;
            background-color: #228b22;
            border: 2px solid #3cb371;
            margin: 5px 0;
        }

        .damage-text {
            position: absolute;
            color: red;
            font-size: 1.5em;
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
        }

        .upgrade-screen {
            display: none;
        }

        @keyframes attack {
            0% { transform: translateX(0); }
            50% { transform: translateX(20px); }
            100% { transform: translateX(0); }
        }

        .hidden {
            display: none;
        }

        @font-face {
            font-family: 'MedievalSharp';
            src: url('https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="menu" id="mainMenu">
            <button onclick="startBattle()">–ù–∞—á–∞—Ç—å –±–æ–π ‚öîÔ∏è</button>
            <button onclick="showUpgrade()">–ü—Ä–æ–∫–∞—á–∫–∞ ‚öíÔ∏è</button>
            <div class="stats">
                <div class="stat">
                    <div>–£—Ä–æ–≤–µ–Ω—å: <span id="playerLevel">1</span></div>
                    <div>–û–ø—ã—Ç: <span id="playerExp">0</span>/10</div>
                </div>
                <div class="stat">
                    ‚ù§Ô∏è –ñ–∏–∑–Ω—å: <span id="playerHealth">10</span>
                </div>
                <div class="stat">
                    ‚öîÔ∏è –ê—Ç–∞–∫–∞: <span id="playerAttack">1</span>
                </div>
                <div class="stat">
                    üõ°Ô∏è –ë—Ä–æ–Ω—è: <span id="playerArmor">0</span>
                </div>
            </div>
        </div>

        <div class="battle-screen hidden" id="battleScreen">
            <div class="characters">
                <div class="character" id="playerCharacter">
                    <div>–ò–≥—Ä–æ–∫</div>
                    <div class="health-bar" id="playerHealthBar"></div>
                </div>
                <div class="character" id="enemyCharacter">
                    <div>–í—Ä–∞–≥</div>
                    <div class="health-bar" id="enemyHealthBar"></div>
                </div>
            </div>
            <div id="battleLog"></div>
            <button onclick="restartBattle()">–°–ª–µ–¥—É—é—â–∏–π –±–æ–π</button>
        </div>

        <div class="upgrade-screen hidden" id="upgradeScreen">
            <h3>–ü—Ä–æ–∫–∞—á–∫–∞ (–û—á–∫–æ–≤: <span id="upgradePoints">0</span>)</h3>
            <button onclick="upgrade('attack')">‚öîÔ∏è –ê—Ç–∞–∫–∞ (+1)</button>
            <button onclick="upgrade('health')">‚ù§Ô∏è –ñ–∏–∑–Ω—å (+5)</button>
            <button onclick="upgrade('armor')">üõ°Ô∏è –ë—Ä–æ–Ω—è (+1)</button>
            <button onclick="showMainMenu()">–ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <script>
        let player = {
            level: 1,
            exp: 0,
            health: 10,
            maxHealth: 10,
            attack: 1,
            armor: 0,
            upgradePoints: 0
        };

        let enemy = {
            health: 10,
            maxHealth: 10,
            attack: 1,
            armor: 0
        };

        let battleInterval;
        let battleTimeout;

        function updateStats() {
            document.getElementById('playerLevel').textContent = player.level;
            document.getElementById('playerExp').textContent = player.exp;
            document.getElementById('playerHealth').textContent = player.health;
            document.getElementById('playerAttack').textContent = player.attack;
            document.getElementById('playerArmor').textContent = player.armor;
            document.getElementById('upgradePoints').textContent = player.upgradePoints;
        }

        function showMainMenu() {
            document.getElementById('mainMenu').classList.remove('hidden');
            document.getElementById('battleScreen').classList.add('hidden');
            document.getElementById('upgradeScreen').classList.add('hidden');
        }

        function startBattle() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('battleScreen').classList.remove('hidden');

            resetBattle();
            generateEnemy();
            updateBattleBars();
            startBattleTimer();
        }

        function generateEnemy() {
            enemy.level = player.level;
            enemy.attack = Math.floor(Math.random() * 2) + player.level;
            enemy.armor = Math.floor(Math.random() * 2);
            enemy.maxHealth = 10 + (player.level * 2);
            enemy.health = enemy.maxHealth;
        }

        function resetBattle() {
            player.health = player.maxHealth;
            enemy.health = enemy.maxHealth;
            document.getElementById('battleLog').innerHTML = '';
            clearTimeout(battleTimeout);
            clearInterval(battleInterval);
        }

        function startBattleTimer() {
            battleTimeout = setTimeout(() => {
                endBattle('timeout');
            }, 10000);

            battleInterval = setInterval(performTurn, 1000);
        }

        function performTurn() {
            if (player.health <= 0 || enemy.health <= 0) {
                endBattle();
                return;
            }

            playerAttack();
            enemyAttack();
        }

        function playerAttack() {
            const damage = Math.max(0, player.attack - enemy.armor);
            enemy.health = Math.max(0, enemy.health - damage);
            showDamage('enemyCharacter', damage);
            updateBattleBars();

            if (enemy.health === 0) endBattle('player');
        }

        function enemyAttack() {
            const damage = Math.max(0, enemy.attack - player.armor);
            player.health = Math.max(0, player.health - damage);
            showDamage('playerCharacter', damage);
            updateBattleBars();

            if (player.health === 0) endBattle('enemy');
        }

        function showDamage(targetId, damage) {
            const target = document.getElementById(targetId);
            const damageText = document.createElement('div');
            damageText.className = 'damage-text';
            damageText.textContent = `-${damage}`;
            damageText.style.animation = 'attack 0.5s';
            target.appendChild(damageText);
            setTimeout(() => {
                damageText.remove();
            }, 1000);
        }

        function updateBattleBars() {
            document.getElementById('playerHealthBar').style.width = `${(player.health / player.maxHealth) * 100}%`;
            document.getElementById('enemyHealthBar').style.width = `${(enemy.health / enemy.maxHealth) * 100}%`;
        }

        function endBattle(winner) {
            clearTimeout(battleTimeout);
            clearInterval(battleInterval);

            if (winner === 'player') {
                const expGain = Math.floor(Math.random() * 3) + 1;
                player.exp += expGain;
                document.getElementById('battleLog').innerHTML = `–ü–æ–±–µ–¥–∞! +${expGain} –æ–ø—ã—Ç–∞`;
                checkLevelUp();
            } else if (winner === 'enemy') {
                document.getElementById('battleLog').innerHTML = '–ü–æ—Ä–∞–∂–µ–Ω–∏–µ!';
            } else {
                document.getElementById('battleLog').innerHTML = '–ù–∏—á—å—è!';
            }

            setTimeout(() => {
                if (player.exp >= 10) {
                    showUpgrade();
                } else {
                    showMainMenu();
                }
            }, 2000);
        }

        function checkLevelUp() {
            if (player.exp >= 10) {
                player.level++;
                player.exp = 0;
                player.upgradePoints++;
                player.maxHealth += 5;
                player.health = player.maxHealth;
                updateStats();
            }
        }

        function showUpgrade() {
            document.getElementById('battleScreen').classList.add('hidden');
            document.getElementById('upgradeScreen').classList.remove('hidden');
            updateStats();
        }

        function upgrade(stat) {
            if (player.upgradePoints > 0 && player.upgradePoints--) {
                switch(stat) {
                    case 'attack':
                        player.attack++;
                        break;
                    case 'health':
                        player.maxHealth += 5;
                        player.health += 5;
                        break;
                    case 'armor':
                        player.armor++;
                        break;
                }
                updateStats();
            }
        }

        function restartBattle() {
            showMainMenu();
            startBattle();
        }

        updateStats();
    </script>
</body>
</html>
