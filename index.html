<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Sopwith</title>
    <style>
        body {
            background-color: #000;
            color: #0f0;
            font-family: monospace;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        #game-container {
            text-align: center;
        }

        #game-screen {
            background-color: #000;
            color: #0f0;
            font-size: 14px;
            line-height: 14px;
            width: 60ch;
            height: 30em;
            overflow: hidden;
            border: 1px solid #0f0;
            white-space: pre;
            margin: 0 auto;
        }

        #controls {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            background-color: #000;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 10px;
            margin: 2px;
            font-size: 16px;
            min-width: 50px;
        }

        @media (max-width: 600px) {
            #game-screen {
                font-size: 12px;
                line-height: 12px;
                width: 40ch;
                height: 20em;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <pre id="game-screen"></pre>
        <div id="controls">
            <button onclick="handleKey('left')">‚¨ÖÔ∏è</button>
            <button onclick="handleKey('right')">‚û°Ô∏è</button>
            <button onclick="handleKey('up')">‚¨ÜÔ∏è</button>
            <button onclick="handleKey('down')">‚¨áÔ∏è</button>
            <button onclick="handleKey('space')">üí£</button>
        </div>
    </div>
    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        const GAME_WIDTH = 60;
        const GAME_HEIGHT = 30;
        const GROUND_HEIGHT = 5;
        const MIN_FLIGHT_HEIGHT = 3; // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –ø–æ–ª–µ—Ç–∞
        const ENEMY_SPAWN_RATE = 0.02; // 2% —à–∞–Ω—Å –ø–æ—è–≤–ª–µ–Ω–∏—è –≤—Ä–∞–≥–∞ –Ω–∞ –∫–∞–∂–¥–æ–º –∫–∞–¥—Ä–µ
        const BULLET_COOLDOWN = 20; // –∫–∞–¥—Ä—ã –º–µ–∂–¥—É –≤—ã—Å—Ç—Ä–µ–ª–∞–º–∏
        const INITIAL_LIVES = 3;
        const FPS = 60;

        // –ò–≥—Ä–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã
        let player = {
            x: 10,
            y: GAME_HEIGHT - GROUND_HEIGHT - 3,
            alive: true,
            lives: INITIAL_LIVES,
            score: 0,
            bulletCooldown: 0
        };

        let enemies = [];
        let bullets = [];
        let terrain = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Ä—Ä–µ–π–Ω–∞
        function initTerrain() {
            terrain = new Array(GAME_WIDTH);
            // –°–æ–∑–¥–∞–µ–º –ø–ª–∞–≤–Ω—ã–π –ª–∞–Ω–¥—à–∞—Ñ—Ç
            let currentHeight = GAME_HEIGHT - GROUND_HEIGHT;
            for (let i = 0; i < GAME_WIDTH; i++) {
                // –°–ª—É—á–∞–π–Ω–æ –º–µ–Ω—è–µ–º –≤—ã—Å–æ—Ç—É
                currentHeight += Math.random() > 0.5 ? 1 : -1;
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
                currentHeight = Math.max(GAME_HEIGHT - GROUND_HEIGHT - 2, 
                                       Math.min(GAME_HEIGHT - GROUND_HEIGHT + 2, currentHeight));
                terrain[i] = Math.floor(currentHeight);
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–∞–≥–∞
        function spawnEnemy() {
            if (Math.random() < ENEMY_SPAWN_RATE) {
                // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –≤—Ä–∞–≥ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä—è–º–æ –Ω–∞–¥ –∏–≥—Ä–æ–∫–æ–º
                let spawnX = GAME_WIDTH - 1;
                let spawnY = Math.floor(Math.random() * (GAME_HEIGHT - GROUND_HEIGHT - MIN_FLIGHT_HEIGHT - 2)) + MIN_FLIGHT_HEIGHT;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –∏–≥—Ä–æ–∫–∞
                if (Math.abs(spawnX - player.x) > 5) { // –ù–µ –±–ª–∏–∂–µ 5 –∫–ª–µ—Ç–æ–∫ –∫ –∏–≥—Ä–æ–∫—É
                    enemies.push({
                        x: spawnX,
                        y: spawnY,
                        speed: 0.5 + Math.random() * 0.5
                    });
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function update() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∏ —Å–Ω–∞—Ä—è–¥–æ–≤
            if (player.bulletCooldown > 0) {
                player.bulletCooldown--;
            }

            // –î–≤–∏–∂–µ–Ω–∏–µ —Å–Ω–∞—Ä—è–¥–æ–≤
            for (let i = 0; i < bullets.length; i++) {
                bullets[i].x += bullets[i].direction;
                if (bullets[i].x < 0 || bullets[i].x >= GAME_WIDTH) {
                    bullets.splice(i, 1);
                    i--;
                    continue;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤–æ –≤—Ä–∞–≥–æ–≤
                for (let j = 0; j < enemies.length; j++) {
                    if (Math.abs(bullets[i].x - enemies[j].x) < 1 && 
                        Math.abs(bullets[i].y - enemies[j].y) < 1) {
                        // –í—Ä–∞–≥ —É–Ω–∏—á—Ç–æ–∂–µ–Ω
                        enemies.splice(j, 1);
                        player.score++;
                        bullets.splice(i, 1);
                        i--;
                        break;
                    }
                }
            }

            // –î–≤–∏–∂–µ–Ω–∏–µ –≤—Ä–∞–≥–æ–≤
            for (let i = 0; i < enemies.length; i++) {
                enemies[i].x -= enemies[i].speed;
                if (enemies[i].x < 0) {
                    enemies.splice(i, 1);
                    i--;
                    continue;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –∏–≥—Ä–æ–∫–æ–º
                if (Math.abs(enemies[i].x - player.x) < 1 && 
                    Math.abs(enemies[i].y - player.y) < 1) {
                    // –ò–≥—Ä–æ–∫ –ø–æ—Ç–µ—Ä—è–µ—Ç –∂–∏–∑–Ω—å
                    player.lives--;
                    if (player.lives <= 0) {
                        player.alive = false;
                    } else {
                        // –°–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞
                        player.x = 10;
                        player.y = GAME_HEIGHT - GROUND_HEIGHT - 3;
                    }
                    enemies.splice(i, 1);
                    break;
                }
            }

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –≤—Ä–∞–≥–æ–≤
            spawnEnemy();
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä—ã
        function draw() {
            let screen = '';
            
            for (let y = 0; y < GAME_HEIGHT; y++) {
                for (let x = 0; x < GAME_WIDTH; x++) {
                    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ—Ä—Ä–µ–π–Ω–∞
                    if (y >= terrain[x]) {
                        screen += '#';
                        continue;
                    }
                    
                    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞
                    if (x === player.x && y === player.y) {
                        screen += 'A';
                        continue;
                    }
                    
                    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—Ä–∞–≥–æ–≤
                    let enemyHere = enemies.find(e => Math.floor(e.x) === x && Math.floor(e.y) === y);
                    if (enemyHere) {
                        screen += 'E';
                        continue;
                    }
                    
                    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–Ω–∞—Ä—è–¥–æ–≤
                    let bulletHere = bullets.find(b => Math.floor(b.x) === x && Math.floor(b.y) === y);
                    if (bulletHere) {
                        screen += '*';
                        continue;
                    }
                    
                    screen += ' ';
                }
                screen += '\n';
            }
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—á–∫–∞—Ö –∏ –∂–∏–∑–Ω—è—Ö
            screen += `\nScore: ${player.score} | Lives: ${player.lives}`;
            
            // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –º–µ—Ä—Ç–≤
            if (!player.alive) {
                screen += '\n\nGame Over! Press R to restart';
            }
            
            document.getElementById('game-screen').textContent = screen;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–ª–∞–≤–∏—à
        function handleKey(key) {
            if (!player.alive && key !== 'r') return;
            
            switch (key) {
                case 'left':
                    if (player.x > 0) player.x--;
                    break;
                case 'right':
                    if (player.x < GAME_WIDTH - 1) player.x++;
                    break;
                case 'up':
                    if (player.y > MIN_FLIGHT_HEIGHT) player.y--;
                    break;
                case 'down':
                    if (player.y < GAME_HEIGHT - GROUND_HEIGHT - 1) player.y++;
                    break;
                case 'space':
                    if (player.bulletCooldown === 0 && player.alive) {
                        bullets.push({
                            x: player.x + 1,
                            y: player.y,
                            direction: 1
                        });
                        player.bulletCooldown = BULLET_COOLDOWN;
                    }
                    break;
                case 'r':
                    if (!player.alive) {
                        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
                        player = {
                            x: 10,
                            y: GAME_HEIGHT - GROUND_HEIGHT - 3,
                            alive: true,
                            lives: INITIAL_LIVES,
                            score: 0,
                            bulletCooldown: 0
                        };
                        enemies = [];
                        bullets = [];
                        initTerrain();
                    }
                    break;
            }
        }

        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            if (player.alive) {
                update();
            }
            draw();
            setTimeout(() => {
                requestAnimationFrame(gameLoop);
            }, 1000 / FPS);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function init() {
            initTerrain();
            gameLoop();
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        document.addEventListener('keydown', (e) => {
            switch (e.key) {
                case 'ArrowLeft':
                case 'a':
                    handleKey('left');
                    break;
                case 'ArrowRight':
                case 'd':
                    handleKey('right');
                    break;
                case 'ArrowUp':
                case 'w':
                    handleKey('up');
                    break;
                case 'ArrowDown':
                case 's':
                    handleKey('down');
                    break;
                case ' ':
                    handleKey('space');
                    break;
                case 'r':
                    handleKey('r');
                    break;
            }
        });

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        init();
    </script>
</body>
</html>