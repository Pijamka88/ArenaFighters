<!DOCTYPE html>
<html>
<head>
    <title>Chaos Fighters Telegram</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #1a1a1a;
            font-family: Arial, sans-serif;
            color: white;
            touch-action: manipulation;
        }

        #mainMenu, #gameScreen, #credits {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .menuButton {
            background: #4CAF50;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            color: white;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            width: 200px;
        }

        #arena {
            width: 100%;
            height: 70vh;
            position: relative;
            background: #2a2a2a;
            overflow: hidden;
        }

        .character {
            position: absolute;
            width: 60px;
            height: 60px;
            background-size: cover;
            transition: all 0.3s;
        }

        .healthBar {
            position: absolute;
            top: -20px;
            width: 60px;
            height: 5px;
            background: #444;
            border-radius: 2px;
        }

        .healthFill {
            height: 100%;
            background: #4CAF50;
            border-radius: 2px;
            transition: width 0.3s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .animated {
            animation: bounce 1s infinite;
        }
    </style>
</head>
<body>
    <div id="mainMenu">
        <button class="menuButton" onclick="startGame()">Начать бой</button>
        <button class="menuButton" onclick="showCredits()">Авторы</button>
    </div>

    <div id="gameScreen" style="display: none;">
        <div id="arena"></div>
        <button class="menuButton" onclick="returnToMenu()">В меню</button>
    </div>

    <div id="credits" style="display: none;">
        <h2>Разработчики:</h2>
        <p>Ваше имя здесь</p>
        <button class="menuButton" onclick="returnToMenu()">Назад</button>
    </div>

    <script>
        let characters = [];
        let bots = [];
        
        function startGame() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'flex';
            initGame();
        }

        function showCredits() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('credits').style.display = 'flex';
        }

        function returnToMenu() {
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('credits').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'flex';
            resetGame();
        }

        function createCharacter(x, y, isPlayer) {
            const char = document.createElement('div');
            char.className = `character ${isPlayer ? 'player' : 'bot'} animated`;
            char.style.left = x + 'px';
            char.style.top = y + 'px';
            char.style.backgroundImage = `url(${isPlayer ? 'player_icon.png' : 'bot_icon.png'})`;

            const healthBar = document.createElement('div');
            healthBar.className = 'healthBar';
            const healthFill = document.createElement('div');
            healthFill.className = 'healthFill';
            healthBar.appendChild(healthFill);
            char.appendChild(healthBar);

            document.getElementById('arena').appendChild(char);

            return {
                element: char,
                health: 100,
                maxHealth: 100,
                attack: 10,
                updateHealth() {
                    healthFill.style.width = `${(this.health/this.maxHealth)*100}%`;
                }
            };
        }

        function initGame() {
            // Создание игрока и ботов
            characters.push(createCharacter(50, 150, true));
            bots.push(createCharacter(window.innerWidth - 110, 150, false));

            // Запуск боя
            startCombat();
        }

        function startCombat() {
            setInterval(() => {
                // Атака игрока
                characters.forEach(char => {
                    const target = bots[0];
                    const damage = Math.floor(Math.random() * 15 + 5);
                    target.health = Math.max(0, target.health - damage);
                    target.updateHealth();
                    checkVictory();
                });

                // Атака ботов
                bots.forEach(bot => {
                    const target = characters[0];
                    const damage = Math.floor(Math.random() * 10 + 5);
                    target.health = Math.max(0, target.health - damage);
                    target.updateHealth();
                    checkVictory();
                });
            }, 1000);
        }

        function checkVictory() {
            if (characters[0].health <= 0) {
                alert('Поражение!');
                returnToMenu();
            }
            if (bots[0].health <= 0) {
                alert('Победа!');
                returnToMenu();
            }
        }

        function resetGame() {
            document.getElementById('arena').innerHTML = '';
            characters = [];
            bots = [];
        }

        // Инициализация Telegram Web App
        window.Telegram.WebApp.ready();
        window.Telegram.WebApp.expand();

    </script>
</body>
</html>