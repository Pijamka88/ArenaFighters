<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Fighters</title>
    <style>
        body {
            margin: 0;
            font-family: 'Courier New', Courier, monospace;
            background: #1a1a1a;
            color: #f0e6d2;
            text-align: center;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .menu-button {
            background: #4a3f35;
            border: 2px solid #6b5f53;
            color: #f0e6d2;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s;
        }
        .menu-button:hover {
            background: #6b5f53;
        }
        .hidden { display: none; }
        .character {
            position: relative;
            width: 150px;
            height: 200px;
            margin: 20px auto;
        }
        .player { left: 50px; }
        .enemy { right: 50px; }
        .health-bar {
            background: #4a3f35;
            border: 2px solid #6b5f53;
            height: 20px;
            margin: 10px 0;
            position: relative;
        }
        .health-fill {
            background: #c94c4c;
            height: 100%;
            transition: width 0.5s;
        }
        .damage-text {
            position: absolute;
            color: #ff4444;
            font-weight: bold;
            font-size: 1.5em;
            animation: floatUp 1s ease-out forwards;
        }
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        .stat-panel {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .upgrade-btn {
            background: #4a3f35;
            border: 2px solid #6b5f53;
            color: #f0e6d2;
            padding: 10px;
            margin: 5px;
            cursor: pointer;
        }
        .upgrade-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .game-over {
            font-size: 3em;
            color: #ff4444;
            margin: 50px;
        }
        .mobile-only {
            display: none;
        }
        @media (max-width: 600px) {
            .mobile-only {
                display: block;
            }
            .desktop-only {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Menu -->
        <div id="mainMenu" class="menu">
            <h1>üõ°Ô∏è Arena Fighters üó°Ô∏è</h1>
            <button class="menu-button" onclick="startBattle()">–ù–∞—á–∞—Ç—å –±–æ–π</button>
            <button class="menu-button" onclick="showUpgrades()">–ü—Ä–æ–∫–∞—á–∫–∞</button>
            <button class="menu-button" onclick="showCharacter()">–ü–µ—Ä—Å–æ–Ω–∞–∂</button>
            <div class="stat-panel">
                <div>
                    <div>–£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></div>
                    <div>–û–ø—ã—Ç: <span id="xp">0</span>/100</div>
                </div>
                <div>
                    <div>–ñ–∏–∑–Ω–∏: <span id="health">100</span></div>
                    <div>–ê—Ç–∞–∫–∞: <span id="attack">10</span></div>
                    <div>–ë—Ä–æ–Ω—è: <span id="armor">5</span></div>
                </div>
            </div>
        </div>

        <!-- Battle Screen -->
        <div id="battleScreen" class="hidden">
            <div class="character player">
                <svg viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                    <rect x="30" y="100" width="40" height="40" fill="#a0a0a0"/>
                    <circle cx="50" cy="70" r="20" fill="#d4af37"/>
                    <rect x="45" y="50" width="10" height="20" fill="#d4af37"/>
                </svg>
                <div class="health-bar">
                    <div id="playerHealth" class="health-fill" style="width:100%"></div>
                </div>
            </div>
            <div class="character enemy">
                <svg viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
                    <rect x="30" y="100" width="40" height="40" fill="#555"/>
                    <circle cx="50" cy="70" r="20" fill="#8b0000"/>
                    <rect x="45" y="50" width="10" height="20" fill="#8b0000"/>
                </svg>
                <div class="health-bar">
                    <div id="enemyHealth" class="health-fill" style="width:100%"></div>
                </div>
            </div>
            <div id="battleLog"></div>
            <button class="menu-button" onclick="endBattle()">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
        </div>

        <!-- Upgrade Screen -->
        <div id="upgradeScreen" class="hidden">
            <h2>–ü—Ä–æ–∫–∞—á–∫–∞ (–û—á–∫–æ–≤: <span id="skillPoints">0</span>)</h2>
            <div>
                <button class="upgrade-btn" onclick="upgrade('attack')">–ê—Ç–∞–∫–∞ (+5)</button>
                <button class="upgrade-btn" onclick="upgrade('health')">–ñ–∏–∑–Ω—å (+20)</button>
                <button class="upgrade-btn" onclick="upgrade('armor')">–ë—Ä–æ–Ω—è (+3)</button>
            </div>
            <button class="menu-button" onclick="showMainMenu()">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Character Screen -->
        <div id="characterScreen" class="hidden">
            <h2>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–∂</h2>
            <div>–£—Ä–æ–≤–µ–Ω—å: <span id="charLevel">1</span></div>
            <div>–û–ø—ã—Ç: <span id="charXp">0</span>/100</div>
            <div>–ñ–∏–∑–Ω–∏: <span id="charHealth">100</span></div>
            <div>–ê—Ç–∞–∫–∞: <span id="charAttack">10</span></div>
            <div>–ë—Ä–æ–Ω—è: <span id="charArmor">5</span></div>
            <button class="menu-button" onclick="showMainMenu()">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOver" class="hidden game-over">
            –ò–≥—Ä–æ–∫ –ø—Ä–æ–∏–≥—Ä–∞–ª!
            <button class="menu-button" onclick="returnToMenu()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <script>
        let player = {
            level: 1,
            xp: 0,
            health: 100,
            maxHealth: 100,
            attack: 10,
            armor: 5,
            skillPoints: 0
        };

        let enemy = {
            health: 100,
            maxHealth: 100,
            attack: 8
        };

        let battleInterval;
        let isPlayerTurn = true;

        function saveGame() {
            localStorage.setItem('playerData', JSON.stringify(player));
        }

        function loadGame() {
            const data = localStorage.getItem('playerData');
            if (data) {
                Object.assign(player, JSON.parse(data));
                updateStats();
            }
        }

        function updateStats() {
            document.getElementById('level').textContent = player.level;
            document.getElementById('xp').textContent = player.xp;
            document.getElementById('health').textContent = player.health;
            document.getElementById('attack').textContent = player.attack;
            document.getElementById('armor').textContent = player.armor;
            document.getElementById('skillPoints').textContent = player.skillPoints;

            document.getElementById('charLevel').textContent = player.level;
            document.getElementById('charXp').textContent = player.xp;
            document.getElementById('charHealth').textContent = player.health;
            document.getElementById('charAttack').textContent = player.attack;
            document.getElementById('charArmor').textContent = player.armor;
        }

        function startBattle() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('battleScreen').classList.remove('hidden');
            resetBattle();
            battleInterval = setInterval(battleTurn, 1500);
        }

        function resetBattle() {
            enemy.health = enemy.maxHealth;
            enemy.attack = 8 + player.level * 2;
            updateHealthBars();
        }

        function updateHealthBars() {
            document.getElementById('playerHealth').style.width = (player.health / player.maxHealth) * 100 + '%';
            document.getElementById('enemyHealth').style.width = (enemy.health / enemy.maxHealth) * 100 + '%';
        }

        function battleTurn() {
            const log = document.getElementById('battleLog');
            if (isPlayerTurn) {
                const damage = Math.max(0, player.attack - Math.floor(enemy.armor * 0.5));
                enemy.health -= damage;
                showDamage('enemy', damage);
                log.innerHTML = `–í—ã –Ω–∞–Ω–µ—Å–ª–∏ ${damage} —É—Ä–æ–Ω–∞!<br>${log.innerHTML}`;
                updateHealthBars();
                if (enemy.health <= 0) {
                    endBattle(true);
                    return;
                }
            } else {
                const damage = Math.max(0, enemy.attack - Math.floor(player.armor * 0.5));
                player.health -= damage;
                showDamage('player', damage);
                log.innerHTML = `–í—Ä–∞–≥ –Ω–∞–Ω–µ—Å ${damage} —É—Ä–æ–Ω–∞!<br>${log.innerHTML}`;
                updateHealthBars();
                if (player.health <= 0) {
                    endBattle(false);
                    return;
                }
            }
            isPlayerTurn = !isPlayerTurn;
        }

        function showDamage(target, damage) {
            const element = document.createElement('div');
            element.className = 'damage-text';
            element.textContent = `-${damage}`;
            document.querySelector(`.${target}`).appendChild(element);
            setTimeout(() => element.remove(), 1000);
        }

        function endBattle(victory) {
            clearInterval(battleInterval);
            if (victory) {
                const xpGain = 20 + Math.floor(Math.random() * 10);
                player.xp += xpGain;
                if (player.xp >= 100) {
                    player.level++;
                    player.skillPoints++;
                    player.xp = player.xp % 100;
                }
                updateStats();
                saveGame();
            } else {
                document.getElementById('gameOver').classList.remove('hidden');
                document.getElementById('battleScreen').classList.add('hidden');
            }
        }

        function returnToMenu() {
            document.getElementById('gameOver').classList.add('hidden');
            showMainMenu();
        }

        function showMainMenu() {
            document.querySelectorAll('.menu').forEach(el => el.classList.add('hidden'));
            document.getElementById('mainMenu').classList.remove('hidden');
        }

        function showUpgrades() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('upgradeScreen').classList.remove('hidden');
        }

        function showCharacter() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('characterScreen').classList.remove('hidden');
        }

        function upgrade(stat) {
            if (player.skillPoints > 0) {
                player.skillPoints--;
                switch(stat) {
                    case 'attack': player.attack += 5; break;
                    case 'health': player.maxHealth += 20; player.health += 20; break;
                    case 'armor': player.armor += 3; break;
                }
                updateStats();
                saveGame();
            }
        }

        loadGame();
        updateStats();
    </script>
</body>
</html>
