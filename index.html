<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Fighters</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: #1a1a1a;
            color: white;
            overflow: hidden;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }

        .screen {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .screen.active {
            display: flex;
        }

        .player, .enemy {
            width: 100px;
            height: 100px;
            background: #4CAF50;
            position: relative;
            transition: transform 0.2s;
        }

        .enemy {
            background: #f44336;
        }

        .health-bar {
            width: 200px;
            height: 20px;
            background: #222;
            margin: 10px;
            position: relative;
        }

        .health {
            height: 100%;
            background: green;
            transition: width 0.3s;
        }

        .stats {
            position: absolute;
            top: 20px;
            display: flex;
            gap: 20px;
        }

        .damage-text {
            position: absolute;
            color: white;
            font-size: 24px;
            animation: floatUp 1s forwards;
            pointer-events: none;
        }

        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        .button {
            padding: 15px 30px;
            background: #555;
            border: none;
            color: white;
            font-size: 18px;
            margin: 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .button:hover {
            background: #777;
        }

        .upgrade-screen {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 20px;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 600px) {
            .player, .enemy {
                width: 80px;
                height: 80px;
            }

            .health-bar {
                width: 150px;
            }

            .button {
                padding: 12px 25px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div class="screen active" id="mainMenu">
            <div class="player" style="margin-bottom: 20px;"></div>
            <div id="playerStats" class="stats">
                <div>_LVL <span id="playerLevel">1</span></div>
                <div>_EXP <span id="playerExp">0</span>/10</div>
                <div>‚ù§Ô∏è <span id="playerHealth">10</span></div>
                <div>‚öîÔ∏è <span id="playerAttack">1</span></div>
                <div>üõ°Ô∏è <span id="playerArmor">0</span></div>
            </div>
            <button class="button" onclick="startBattle()">–ù–∞—á–∞—Ç—å –±–æ–π</button>
            <button class="button" onclick="showUpgrades()">–ü—Ä–æ–∫–∞—á–∫–∞</button>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –±–æ—è -->
        <div class="screen" id="battleScreen">
            <div style="display: flex; width: 100%; justify-content: space-around; position: relative;">
                <div class="player" id="player"></div>
                <div class="enemy" id="enemy"></div>
            </div>
            <div style="position: absolute; top: 20px; width: 100%; display: flex; justify-content: space-around;">
                <div class="stats" id="battlePlayerStats"></div>
                <div class="stats" id="battleEnemyStats"></div>
            </div>
            <div id="damageContainer"></div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ–∫–∞—á–∫–∏ -->
        <div class="screen" id="upgradeScreen">
            <div class="upgrade-screen">
                <button class="button" onclick="upgrade('attack')">–£–ª—É—á—à–∏—Ç—å –∞—Ç–∞–∫—É ‚öîÔ∏è</button>
                <button class="button" onclick="upgrade('health')">–£–ª—É—á—à–∏—Ç—å –∂–∏–∑–Ω–∏ ‚ù§Ô∏è</button>
                <button class="button" onclick="upgrade('armor')">–£–ª—É—á—à–∏—Ç—å –±—Ä–æ–Ω—é üõ°Ô∏è</button>
            </div>
            <div>–î–æ—Å—Ç—É–ø–Ω–æ –æ—á–∫–æ–≤: <span id="upgradePoints">0</span></div>
            <button class="button" onclick="backToMenu()">–ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <script>
        let player = {
            level: 1,
            exp: 0,
            health: 10,
            maxHealth: 10,
            attack: 1,
            armor: 0,
            upgradePoints: 0
        };

        let enemy = {
            level: 1,
            health: 10,
            maxHealth: 10,
            attack: 1,
            armor: 0
        };

        let battleInterval;
        let battleTimeout;

        function updateMainMenuStats() {
            document.getElementById('playerLevel').textContent = player.level;
            document.getElementById('playerExp').textContent = player.exp;
            document.getElementById('playerHealth').textContent = player.health;
            document.getElementById('playerAttack').textContent = player.attack;
            document.getElementById('playerArmor').textContent = player.armor;
        }

        function startBattle() {
            document.getElementById('mainMenu').classList.remove('active');
            document.getElementById('battleScreen').classList.add('active');

            resetBattle();
            setupBattle();
            startBattleLoop();
            setupBattleTimeout();
        }

        function resetBattle() {
            player.health = player.maxHealth;
            enemy = {
                level: Math.max(1, player.level - 1 + Math.floor(Math.random() * 3)),
                health: 10 + (player.level * 2),
                maxHealth: 10 + (player.level * 2),
                attack: 1 + Math.floor(player.level * 0.5),
                armor: Math.floor(player.level * 0.3)
            };
        }

        function setupBattle() {
            document.getElementById('battlePlayerStats').innerHTML = `
                LVL ${player.level}<br>
                ‚ù§Ô∏è ${player.health}/${player.maxHealth}<br>
                ‚öîÔ∏è ${player.attack}<br>
                üõ°Ô∏è ${player.armor}
            `;

            document.getElementById('battleEnemyStats').innerHTML = `
                LVL ${enemy.level}<br>
                ‚ù§Ô∏è ${enemy.health}/${enemy.maxHealth}<br>
                ‚öîÔ∏è ${enemy.attack}<br>
                üõ°Ô∏è ${enemy.armor}
            `;

            updateHealthBar('player');
            updateHealthBar('enemy');
        }

        function updateHealthBar(character) {
            const healthBar = document.querySelector(`#${character} .health`);
            const characterObj = character === 'player' ? player : enemy;
            healthBar.style.width = `${(characterObj.health / characterObj.maxHealth) * 100}%`;
        }

        function startBattleLoop() {
            battleInterval = setInterval(() => {
                attack('player', 'enemy');
                setTimeout(() => attack('enemy', 'player'), 500);
            }, 2000);
        }

        function setupBattleTimeout() {
            battleTimeout = setTimeout(endBattle, 10000);
        }

        function attack(attacker, defender) {
            const attackerObj = attacker === 'player' ? player : enemy;
            const defenderObj = defender === 'player' ? player : enemy;
            
            const damage = Math.max(1, attackerObj.attack - defenderObj.armor);
            defenderObj.health = Math.max(0, defenderObj.health - damage);

            showDamageText(defender, damage);
            updateHealthBar(defender);

            if (defenderObj.health <= 0) {
                endBattle(attacker === 'player' ? 'win' : 'lose');
            }
        }

        function showDamageText(target, damage) {
            const container = document.getElementById('damageContainer');
            const text = document.createElement('div');
            text.className = 'damage-text';
            text.textContent = `-${damage}`;
            text.style.left = target === 'player' ? '25%' : '75%';
            container.appendChild(text);
            setTimeout(() => text.remove(), 1000);
        }

        function endBattle(result) {
            clearInterval(battleInterval);
            clearTimeout(battleTimeout);

            if (result === 'win') {
                player.exp += enemy.level * 5;
                if (player.exp >= player.level * 10) {
                    player.level++;
                    player.upgradePoints++;
                    player.exp = 0;
                }
            }

            setTimeout(() => {
                document.getElementById('battleScreen').classList.remove('active');
                document.getElementById('mainMenu').classList.add('active');
                updateMainMenuStats();
            }, 2000);
        }

        function showUpgrades() {
            document.getElementById('mainMenu').classList.remove('active');
            document.getElementById('upgradeScreen').classList.add('active');
            document.getElementById('upgradePoints').textContent = player.upgradePoints;
        }

        function upgrade(stat) {
            if (player.upgradePoints > 0) {
                player.upgradePoints--;
                if (stat === 'attack') player.attack++;
                if (stat === 'health') player.maxHealth += 5;
                if (stat === 'armor') player.armor++;
                updateMainMenuStats();
                document.getElementById('upgradePoints').textContent = player.upgradePoints;
            }
        }

        function backToMenu() {
            document.getElementById('upgradeScreen').classList.remove('active');
            document.getElementById('mainMenu').classList.add('active');
        }

        updateMainMenuStats();
    </script>
</body>
</html>
