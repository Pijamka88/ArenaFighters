<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Fighters</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            background: #1a1a1a;
            color: #fff;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .hidden {
            display: none;
        }

        .menu-button {
            background: #4CAF50;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            transition: 0.3s;
        }

        .menu-button:hover {
            background: #45a049;
        }

        .character {
            font-size: 4em;
            margin: 20px 0;
        }

        .stat-bar {
            background: #333;
            height: 30px;
            border-radius: 15px;
            margin: 10px 0;
            overflow: hidden;
        }

        .health-fill {
            background: #f44336;
            height: 100%;
            transition: width 0.5s;
        }

        .battle-container {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
        }

        .damage-text {
            position: absolute;
            color: #ff0;
            font-size: 2em;
            text-shadow: 2px 2px #000;
            animation: floatUp 1s forwards;
        }

        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        .mobile-only {
            display: none;
        }

        @media (max-width: 600px) {
            .mobile-only {
                display: block;
            }
            
            .stat-bar {
                height: 20px;
            }
            
            .character {
                font-size: 3em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="mainMenu">
            <div class="character">‚öîÔ∏è</div>
            <div id="playerStats">
                <div>–£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></div>
                <div>–û–ø—ã—Ç: <span id="xp">0</span>/100</div>
                <div>–ê—Ç–∞–∫–∞: <span id="attack">10</span></div>
                <div>–ë—Ä–æ–Ω—è: <span id="armor">5</span></div>
                <div>–ó–¥–æ—Ä–æ–≤—å–µ: <span id="maxHealth">100</span></div>
            </div>
            <button class="menu-button" onclick="startBattle()">–ù–∞—á–∞—Ç—å –±–æ–π</button>
            <button class="menu-button" onclick="showUpgrades()">–ü—Ä–æ–∫–∞—á–∫–∞</button>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –±–æ—è -->
        <div id="battleScreen" class="hidden">
            <div class="battle-container">
                <div class="player-zone">
                    <div class="stat-bar">
                        <div class="health-fill" id="playerHealthBar"></div>
                    </div>
                    <div class="character" id="playerChar">üõ°Ô∏è</div>
                    <div class="stat-bar">
                        <div class="health-fill" id="enemyHealthBar"></div>
                    </div>
                    <div class="character" id="enemyChar">üî•</div>
                </div>
            </div>
            <div id="battleLog"></div>
            <button class="menu-button mobile-only" onclick="playerAttack()">–ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ–∫–∞—á–∫–∏ -->
        <div id="upgradeMenu" class="hidden">
            <div>–î–æ—Å—Ç—É–ø–Ω–æ –æ—á–∫–æ–≤: <span id="skillPoints">0</span></div>
            <button class="menu-button" onclick="upgrade('attack')">–£–ª—É—á—à–∏—Ç—å –∞—Ç–∞–∫—É</button>
            <button class="menu-button" onclick="upgrade('armor')">–£–ª—É—á—à–∏—Ç—å –±—Ä–æ–Ω—é</button>
            <button class="menu-button" onclick="upgrade('health')">–£–≤–µ–ª–∏—á–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ</button>
            <button class="menu-button" onclick="showMainMenu()">–ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <script>
        let player = {
            level: 1,
            xp: 0,
            attack: 10,
            armor: 5,
            maxHealth: 100,
            currentHealth: 100,
            skillPoints: 0
        };

        let enemy = {
            level: 1,
            attack: 8,
            armor: 3,
            maxHealth: 80,
            currentHealth: 80
        };

        let battleInterval;
        let isPlayerTurn = true;

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        if(localStorage.getItem('arenaPlayer')) {
            Object.assign(player, JSON.parse(localStorage.getItem('arenaPlayer')));
        }

        function saveGame() {
            localStorage.setItem('arenaPlayer', JSON.stringify(player));
        }

        function showMainMenu() {
            document.getElementById('mainMenu').classList.remove('hidden');
            document.getElementById('battleScreen').classList.add('hidden');
            document.getElementById('upgradeMenu').classList.add('hidden');
            updateStatsDisplay();
        }

        function startBattle() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('battleScreen').classList.remove('hidden');
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Ä–∞–≥–∞
            enemy.level = player.level + Math.floor(Math.random() * 2) - 1;
            enemy.attack = 8 + enemy.level * 2;
            enemy.armor = 3 + enemy.level;
            enemy.maxHealth = 80 + enemy.level * 20;
            enemy.currentHealth = enemy.maxHealth;
            
            updateBattleDisplay();
            battleInterval = setInterval(enemyTurn, 2000);
        }

        function updateBattleDisplay() {
            document.getElementById('playerHealthBar').style.width = 
                (player.currentHealth / player.maxHealth * 100) + '%';
            document.getElementById('enemyHealthBar').style.width = 
                (enemy.currentHealth / enemy.maxHealth * 100) + '%';
        }

        function playerAttack() {
            if(!isPlayerTurn) return;
            
            const damage = Math.max(1, player.attack - enemy.armor);
            enemy.currentHealth = Math.max(0, enemy.currentHealth - damage);
            
            showDamageText('enemyChar', damage);
            updateBattleDisplay();
            
            if(enemy.currentHealth <= 0) {
                endBattle(true);
                return;
            }
            
            isPlayerTurn = false;
            setTimeout(enemyTurn, 1000);
        }

        function enemyTurn() {
            const damage = Math.max(1, enemy.attack - player.armor);
            player.currentHealth = Math.max(0, player.currentHealth - damage);
            
            showDamageText('playerChar', damage);
            updateBattleDisplay();
            
            if(player.currentHealth <= 0) {
                endBattle(false);
                return;
            }
            
            isPlayerTurn = true;
        }

        function showDamageText(targetId, damage) {
            const target = document.getElementById(targetId);
            const text = document.createElement('div');
            text.className = 'damage-text';
            text.textContent = '-' + damage;
            text.style.position = 'absolute';
            text.style.left = target.offsetLeft + target.offsetWidth/2 - 30 + 'px';
            text.style.top = target.offsetTop + 'px';
            document.body.appendChild(text);
            setTimeout(() => text.remove(), 1000);
        }

        function endBattle(victory) {
            clearInterval(battleInterval);
            if(victory) {
                const xpGain = 20 + enemy.level * 5;
                player.xp += xpGain;
                if(player.xp >= 100) {
                    player.level++;
                    player.skillPoints++;
                    player.xp = 0;
                }
                alert(`–ü–æ–±–µ–¥–∞! +${xpGain} –æ–ø—ã—Ç–∞`);
                document.getElementById('battleScreen').classList.add('hidden');
                showMainMenu();
            } else {
                alert('–ò–≥—Ä–æ–∫ –ø—Ä–æ–∏–≥—Ä–∞–ª!');
                player.currentHealth = player.maxHealth;
                showMainMenu();
            }
            saveGame();
        }

        function showUpgrades() {
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('upgradeMenu').classList.remove('hidden');
            document.getElementById('skillPoints').textContent = player.skillPoints;
        }

        function upgrade(stat) {
            if(player.skillPoints <= 0) return;
            
            player.skillPoints--;
            switch(stat) {
                case 'attack':
                    player.attack += 2;
                    break;
                case 'armor':
                    player.armor += 1;
                    break;
                case 'health':
                    player.maxHealth += 10;
                    player.currentHealth = player.maxHealth;
                    break;
            }
            saveGame();
            updateStatsDisplay();
            showUpgrades();
        }

        function updateStatsDisplay() {
            document.getElementById('level').textContent = player.level;
            document.getElementById('xp').textContent = player.xp;
            document.getElementById('attack').textContent = player.attack;
            document.getElementById('armor').textContent = player.armor;
            document.getElementById('maxHealth').textContent = player.maxHealth;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        showMainMenu();
    </script>
</body>
</html>
