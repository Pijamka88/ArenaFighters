<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="telegram:web_app_version" content="1">
    <title>Arena Fighters</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            background-color: #3a2d21;
            color: #f5e4c3;
            overflow: hidden;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
        }

        .menu {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 50px;
        }

        .menu button {
            padding: 15px 30px;
            background-color: #7a6e61;
            border: 2px solid #f5e4c3;
            color: #f5e4c3;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .menu button:hover {
            background-color: #9d8f7c;
        }

        .player-stats {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .enemy-stats {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-direction: row-reverse;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .health-bar {
            height: 20px;
            background-color: #4a4a4a;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .health-fill {
            height: 100%;
            background-color: #4caf50;
            transition: width 0.3s;
        }

        .battle-screen {
            display: none;
            flex-direction: row;
            justify-content: space-around;
            width: 100%;
            margin-top: 60px;
        }

        .character {
            text-align: center;
            font-size: 24px;
            animation: float 2s infinite;
        }

        .damage-text {
            position: absolute;
            color: red;
            font-weight: bold;
            font-size: 24px;
            animation: damage 1s forwards;
        }

        .upgrade-screen {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 50px;
        }

        .upgrade-btn {
            background-color: #5a4e42 !important;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes damage {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-30px); }
        }

        @media (max-width: 600px) {
            .menu button {
                padding: 12px 25px;
                font-size: 16px;
            }
            
            .stat { font-size: 12px; }
            .character { font-size: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="menu" id="mainMenu">
            <button onclick="startBattle()">‚öîÔ∏è –ù–∞—á–∞—Ç—å –±–æ–π</button>
            <button onclick="showUpgrades()">üõ°Ô∏è –ü—Ä–æ–∫–∞—á–∫–∞</button>
        </div>

        <div class="battle-screen" id="battleScreen">
            <div class="player-container">
                <div class="character" id="playerIcon">üë® medieval</div>
                <div class="health-bar">
                    <div class="health-fill" id="playerHealth"></div>
                </div>
            </div>
            
            <div class="enemy-container">
                <div class="character" id="enemyIcon">È≠îÁéã</div>
                <div class="health-bar">
                    <div class="health-fill" id="enemyHealth"></div>
                </div>
            </div>
        </div>

        <div class="upgrade-screen" id="upgradeScreen">
            <div class="upgrade-btns">
                <button onclick="upgradeStat('attack')">üó°Ô∏è –ê—Ç–∞–∫–∞ (+1)</button>
                <button onclick="upgradeStat('armor')">üõ°Ô∏è –ë—Ä–æ–Ω—è (+1)</button>
                <button onclick="upgradeStat('maxHealth')">‚ù§Ô∏è –ñ–∏–∑–Ω—å (+2)</button>
            </div>
            <button onclick="hideUpgrades()">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
        </div>
    </div>

    <div class="player-stats" id="playerStats"></div>
    <div class="enemy-stats" id="enemyStats"></div>

    <script>
        const player = {
            level: 1,
            xp: 0,
            xpToLevel: 10,
            health: 10,
            maxHealth: 10,
            attack: 3,
            armor: 1,
            upgradePoints: 0
        };

        let enemy = {
            level: 1,
            health: 10,
            maxHealth: 10,
            attack: 3,
            armor: 1
        };

        let battleInterval;
        let battleTimeout;

        function updateStats() {
            document.getElementById('playerStats').innerHTML = `
                <div class="stat"><i class="fas fa-user"></i> ${player.level}</div>
                <div class="stat"><i class="fas fa-star"></i> ${player.xp}/${player.xpToLevel}</div>
                <div class="stat"><i class="fas fa-heart"></i> ${player.health}</div>
                <div class="stat"><i class="fas fa-sword"></i> ${player.attack}</div>
                <div class="stat"><i class="fas fa-shield-alt"></i> ${player.armor}</div>
            `;
        }

        function startBattle() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('battleScreen').style.display = 'flex';
            
            resetCharacters();
            generateEnemy();
            updateBattleUI();
            
            battleInterval = setInterval(performAttack, 1000);
            battleTimeout = setTimeout(endBattle, 10000);
        }

        function resetCharacters() {
            player.health = player.maxHealth;
            enemy = {
                level: Math.max(1, player.level - 1 + Math.floor(Math.random() * 3)),
                maxHealth: 10 + Math.floor(Math.random() * 5),
                attack: 3 + Math.floor(Math.random() * 3),
                armor: 1 + Math.floor(Math.random() * 2)
            };
            enemy.health = enemy.maxHealth;
        }

        function generateEnemy() {
            const names = ['È≠îÁéã', '–û—Ä–∫', '–ì–æ–±–ª–∏–Ω', '–°–∫–µ–ª–µ—Ç', '–í–∞—Ä–≤–∞—Ä'];
            document.getElementById('enemyIcon').textContent = 
                names[Math.floor(Math.random() * names.length)];
        }

        function updateBattleUI() {
            document.getElementById('playerHealth').style.width = 
                (player.health / player.maxHealth) * 100 + '%';
            document.getElementById('enemyHealth').style.width = 
                (enemy.health / enemy.maxHealth) * 100 + '%';

            document.getElementById('enemyStats').innerHTML = `
                <div class="stat"><i class="fas fa-user"></i> ${enemy.level}</div>
                <div class="stat"><i class="fas fa-heart"></i> ${enemy.health}</div>
                <div class="stat"><i class="fas fa-sword"></i> ${enemy.attack}</div>
                <div class="stat"><i class="fas fa-shield-alt"></i> ${enemy.armor}</div>
            `;
        }

        function performAttack() {
            // Player attack
            let damage = Math.max(1, player.attack - enemy.armor);
            enemy.health = Math.max(0, enemy.health - damage);
            showDamageText('enemy', damage);
            
            // Enemy attack
            damage = Math.max(1, enemy.attack - player.armor);
            player.health = Math.max(0, player.health - damage);
            showDamageText('player', damage);
            
            updateBattleUI();
            
            if (player.health <= 0 || enemy.health <= 0) {
                endBattle();
            }
        }

        function showDamageText(target, damage) {
            const container = document.querySelector(`#${target === 'player' ? 'player' : 'enemy'}Icon`);
            const text = document.createElement('div');
            text.className = 'damage-text';
            text.textContent = `-${damage}`;
            text.style.position = 'absolute';
            text.style.left = '50%';
            text.style.transform = 'translateX(-50%)';
            container.appendChild(text);
            
            setTimeout(() => text.remove(), 1000);
        }

        function endBattle() {
            clearInterval(battleInterval);
            clearTimeout(battleTimeout);
            
            let victory = enemy.health <= 0;
            if (victory) {
                player.xp += enemy.level * 2;
                checkLevelUp();
            }
            
            setTimeout(() => {
                alert(victory ? '–ü–æ–±–µ–¥–∞!' : '–ü–æ—Ä–∞–∂–µ–Ω–∏–µ!');
                document.getElementById('battleScreen').style.display = 'none';
                document.getElementById('mainMenu').style.display = 'flex';
                
                if (victory && player.upgradePoints > 0) {
                    showUpgrades();
                }
            }, 100);
        }

        function checkLevelUp() {
            if (player.xp >= player.xpToLevel) {
                player.level++;
                player.upgradePoints++;
                player.xp = 0;
                player.xpToLevel = Math.floor(player.xpToLevel * 1.5);
                updateStats();
            }
        }

        function showUpgrades() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('upgradeScreen').style.display = 'flex';
            updateStats();
        }

        function hideUpgrades() {
            document.getElementById('upgradeScreen').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'flex';
        }

        function upgradeStat(stat) {
            if (player.upgradePoints > 0) {
                player.upgradePoints--;
                
                switch(stat) {
                    case 'attack':
                        player.attack += 1;
                        break;
                    case 'armor':
                        player.armor += 1;
                        break;
                    case 'maxHealth':
                        player.maxHealth += 2;
                        player.health += 2;
                        break;
                }
                
                updateStats();
                if (player.upgradePoints === 0) {
                    hideUpgrades();
                }
            }
        }

        updateStats();
    </script>
</body>
</html>
