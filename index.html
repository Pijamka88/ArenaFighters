<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Fighters</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <script>
        const config = {
            type: Phaser.AUTO,
            width: window.innerWidth,
            height: window.innerHeight,
            parent: 'game-container',
            scene: [MainMenu, CharacterSelect, Battle],
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 0 }
                }
            },
            scale: {
                mode: Phaser.Scale.FIT,
                autoCenter: Phaser.Scale.CENTER_BOTH
            }
        };

        const game = new Phaser.Game(config);
        let selectedCharacter = 'knight';
        let playerLevel = 1;
        let playerExp = 0;

        // Сцена главного меню
        class MainMenu extends Phaser.Scene {
            constructor() {
                super('MainMenu');
            }

            preload() {
                this.load.image('background', 'https://i.imgur.com/bg12345.jpg');
                this.load.spritesheet('button', 'https://i.imgur.com/btn4567.png', { frameWidth: 256, frameHeight: 64 });
            }

            create() {
                this.add.image(0, 0, 'background').setOrigin(0).setScale(2);
                
                this.add.text(config.width/2, 100, 'Арена Бойцов', {
                    font: '64px MedievalSharp',
                    fill: '#ffd700',
                    stroke: '#000',
                    strokeThickness: 4
                }).setOrigin(0.5);

                this.createButton(config.width/2, 300, 'Новая игра', () => this.scene.start('Battle'));
                this.createButton(config.width/2, 400, 'Выбор персонажа', () => this.scene.start('CharacterSelect'));
                this.createButton(config.width/2, 500, 'Выход', () => window.close());
                
                this.add.text(20, 20, `Lv.${playerLevel} EXP: ${playerExp}/100`, {
                    font: '24px MedievalSharp',
                    fill: '#fff'
                });
            }

            createButton(x, y, text, callback) {
                const btn = this.add.sprite(x, y, 'button').setInteractive().setScale(1.2);
                this.add.text(x, y, text, {
                    font: '32px MedievalSharp',
                    fill: '#000',
                    stroke: '#fff',
                    strokeThickness: 2
                }).setOrigin(0.5);
                
                btn.on('pointerover', () => btn.setFrame(1));
                btn.on('pointerout', () => btn.setFrame(0));
                btn.on('pointerdown', callback);
            }
        }

        // Сцена выбора персонажа
        class CharacterSelect extends Phaser.Scene {
            constructor() {
                super('CharacterSelect');
            }

            preload() {
                this.load.image('knight', 'https://i.imgur.com/knight.png');
                this.load.image('mage', 'https://i.imgur.com/mage.png');
                this.load.image('archer', 'https://i.imgur.com/archer.png');
            }

            create() {
                this.add.image(0, 0, 'background').setOrigin(0).setScale(2);
                
                this.add.text(config.width/2, 100, 'Выбор героя', {
                    font: '56px MedievalSharp',
                    fill: '#ffd700',
                    stroke: '#000',
                    strokeThickness: 4
                }).setOrigin(0.5);

                const chars = [
                    { type: 'knight', x: config.width/2 - 200 },
                    { type: 'mage', x: config.width/2 },
                    { type: 'archer', x: config.width/2 + 200 }
                ];

                chars.forEach(char => {
                    const sprite = this.add.sprite(char.x, 350, char.type).setScale(2).setInteractive();
                    sprite.on('pointerdown', () => {
                        selectedCharacter = char.type;
                        this.scene.start('MainMenu');
                    });
                    sprite.on('pointerover', () => sprite.setScale(2.2));
                    sprite.on('pointerout', () => sprite.setScale(2));
                });
            }
        }

        // Сцена боя
        class Battle extends Phaser.Scene {
            constructor() {
                super('Battle');
            }

            preload() {
                // Загрузка ассетов для боя
                this.load.spritesheet('knight', 'https://i.imgur.com/knight_sprites.png', { frameWidth: 64, frameHeight: 64 });
                this.load.spritesheet('mage', 'https://i.imgur.com/mage_sprites.png', { frameWidth: 64, frameHeight: 64 });
                this.load.spritesheet('archer', 'https://i.imgur.com/archer_sprites.png', { frameWidth: 64, frameHeight: 64 });
            }

            create() {
                // Логика боя из предыдущего примера
            }
        }
    </script>
</body>
</html>
